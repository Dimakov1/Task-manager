#: import NoTransition kivy.uix.screenmanager.NoTransition
Screens:
    transition: NoTransition()
    Login:
    Register:
    RailScreen:


<Login>:
    name: 'login'
    input_login: login
    input_password: password
    MDScreen:
        md_bg_color: app.theme_cls.backgroundColor
        MDFloatLayout:
            MDIconButton: #кнопка для показа пароля (нужно доделать)
                style: "standard"
                icon: 'eye'
                elevation: 2
                theme_icon_color: "Custom"
                icon_color: "white"
                on_press: app.change_theme() #доделать
                pos_hint: {'center_x': .7, "center_y": .428}

        BoxLayout:
            size_hint: (.5, .5)
            pos_hint: {'center_x': .5, 'center_y': .5}
            padding: '10dp'
            orientation: 'vertical'
            md_bg_color: app.theme_cls.primaryColor
            spacing: "40"
            MDLabel:
                font_style: "Headline"
                text: 'Вход'
                text_color: 'white'
                halign: 'center'

            FieldText:
                text_color: 'white'
                color_up: 'white'
                id: login
                icon: 'account'
                hinter: 'Логин'

            FieldText:
                text_color: 'white'
                color_up: 'white'
                id: password
                hinter: 'Пароль'
                password: True
                icon: 'key'



            BoxLayout:
                pos_hint: {'center_x': .5, 'center_y': .5}
                orientation : 'horizontal'
                spacing: "180"
                MDButton:
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: "green"
                    on_press: root.login_user()
                    MDButtonText:
                        text: '[b]ВОЙТИ[/b]'
                MDButton:
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: "red"
                    on_press:
                        root.input_login.text = ""
                        root.input_password.text = ""
                        root.manager.current = 'register'
                    MDButtonText:
                        text: '[b]РЕГИСТРАЦИЯ[/b]'



<FieldText>:
    theme_text_color: "Custom"
    hint_txt : hint_txt
    id:hint_txt
    text_color_normal: root.text_color
    text_color_focus: root.text_color
    radius: [dp(19)]
    on_text: root.check_text()

    MDTextFieldTrailingIcon:
        more_icon : root.more_icon

    MDTextFieldLeadingIcon:
        icon: root.icon
        theme_icon_color: "Custom"
        icon_color_normal: root.text_color
        icon_color_focus: root.text_color

    MDTextFieldHintText:
        text: root.hinter

        text_color_normal: root.color_up
        text_color_focus: root.color_up




<Register>:
    name: 'register'
    login_t: login
    password_t: password
    password_t2: password2
    MDScreen:
        md_bg_color: app.theme_cls.backgroundColor
        BoxLayout:
            size_hint: (.5, .5)
            pos_hint: {'center_x': .5, 'center_y': .3}
            padding: '10dp'
            orientation: 'vertical'
            md_bg_color: app.theme_cls.primaryColor
            spacing: "40"
            MDLabel:
                text: "Регистрация"
                font_style: "Headline"
                text_color: 'white'
                halign: 'center'

            FieldText:
                id: login
                text_color: 'white'
                color_up: 'white'
                icon: 'account'
                hinter: 'Логин'
            FieldText:
                id: password
                text_color: 'white'
                color_up: 'white'
                icon: 'key'
                hinter: 'Пароль'
            FieldText:
                id: password2
                text_color: 'white'
                icon: 'key'
                hinter: 'Пароль'
            MDButton:
                on_press: root.register()
                MDButtonText:
                    text: 'Зарегистрироваться'
            MDButton:
                on_press:
                    root.login_t.text = ""
                    root.password_t.text = ""
                    root.password_t2.text = ""
                    root.manager.current = 'login'
                MDButtonText:
                    text: 'назад'



<RailScreen>:
    name: 'rail_screen'
    BoxLayout:
        orientation: 'horizontal'

        MDNavigationRail:
            md_bg_color: app.theme_cls.backgroundColor
            elevation: 1
            type: "unselected"

            CommonNavigationRailItem:
                icon: "alert-circle"
                radius: (24)*4
                text: "Важные"

            CommonNavigationRailItem:
                icon: "bookmark"
                radius: (24)*4
                text: "Активные"

            CommonNavigationRailItem:
                icon: "robot"
                radius: (24)*4
                on_active: root.togpt()

            CommonNavigationRailItem:
                icon: "account"
                radius: (24)*4
                text: "Аккаунт"

        ScreensSecond:
            transition: NoTransition()
            GPT:
            MenuScreen:
            ProfileScreen:
            TaskScreen:


<CommonNavigationRailItem>

    MDNavigationRailItemIcon:
        icon: root.icon

    MDNavigationRailItemLabel:
        text: root.text


<MenuScreen>:
    name: 'menu_screen'
    MDScreen:
        md_bg_color: app.theme_cls.backgroundColor
        MDButton:
            pos_hint: {"center_x": .5, "center_y": .5}
            style: "filled"
            theme_bg_color: "Custom"
            md_bg_color: "green"
            on_press:
                root.manager.current = 'tasks'
                root.show()

            MDButtonIcon:
                icon: "alarm"

            MDButtonText:
                text: "123"
                theme_text_color: "Custom"
                text_color: "red"


<ProfileScreen>:
    name: 'profile'
    MDScreen:
        md_bg_color: app.theme_cls.backgroundColor
        MDButton:
            pos_hint: {"center_x": .5, "center_y": .5}
            style: "filled"
            theme_bg_color: "Custom"
            md_bg_color: "green"
            on_press:
                root.manager.current = 'menu_screen'

            MDButtonIcon:
                icon: "account"

            MDButtonText:
                text: "Account"
                theme_text_color: "Custom"
                text_color: "white"

<TaskScreen>:
    name: 'tasks'
    MDScreen:
        md_bg_color: app.theme_cls.backgroundColor
        ScrollView:
            size_hint_x: .5
            md_bg_color: app.theme_cls.backgroundColor
            pos_hint: {"center_x": .5, "center_y": .5}

            MDList:
                id: tasks_

<ExpansionPanelItem>:

    MDExpansionPanelHeader:

        MDListItem:
            theme_bg_color: "Custom"
            md_bg_color: '#819090'
            ripple_effect: False

            MDListItemSupportingText:
                text: root.header_text

            TrailingPressedIconButton:
                id: chevron
                icon: "chevron-right"
                on_release: root.tap_expansion_chevron(root, chevron)



    MDExpansionPanelContent:
        orientation: "vertical"
        ripple_effect: False
        padding: "12dp", 0, "12dp", "12dp"
        md_bg_color: '#819090'

        MDLabel:
            adaptive_height: True
            padding_x: "16dp"
            padding_y: "12dp"

        MDListItem:
            theme_bg_color: "Custom"
            md_bg_color: '#819090'
            ripple_effect: False


            MDCheckbox:
                checkbox_icon_down: 'delete'
                on_press:
                    app.change_theme(1)

            MDListItemLeadingIcon:
                icon: "calendar"


            MDListItemHeadlineText: #описание
                text: root.description

            MDListItemSupportingText: #должен стоять дд
                text: "kivydevelopment@gmail.com"
<Command>
    size_hint_y: None
    pos_hint: {"right": .98}
    height: self.texture_size[1]
    padding: 12, 10
    theme_text_color: "Custom"
    text_color: 1, 1, 1, 1
    canvas.before:
        Color:
            rgb: (1, 170/255, 23/4, 1)
        RoundedRectangle:
            size: self.width, self.height
            pos: self.pos
            radius: [23, 23, 23, 23]

<Response>:
    size_hint_y: None
    pos_hint: {"x": .02}
    height: self.texture_size[1]
    padding: 12, 10
    theme_text_color: "Custom"
    text_color: 1, 1, 1, 1
    canvas.before:
        Color:
            rgb: (1, 170/255, 23/255, 1)
        RoundedRectangle:
            size: self.width, self.height
            pos: self.pos
            radius: [23, 23, 23, 23]

<GPT>:
    name: 'gpt_screen'
    user_input: user

    MDScreen:
        MDFloatLayout:
            md_bg_color: app.theme_cls.backgroundColor
            MDFloatLayout:
                size_hint_y: .11
                pos_hint: {'center_y':.95}
                MDLabel:
                    id: 'gpt_label'
                    text: 'GIGACHAT'
                    halign: 'left'
                    size_hint: None, None
                    size: 200, 100
                    padding: 20, 20
                    pos_hint: {'top': 1}
                    text_color: 'white'
                    font_name: 'Poppins-SemiBolt.ttf'

            ScrollView:
                size_hint_y: .77
                pos_hint:{'x': .0, 'y': .116}


                BoxLayout:
                    id: chat_list
                    orientation: 'vertical'
                    size: (root.width, root.height)

                    height: self.minimum_height
                    size_hint: None, None
                    pso_hint: {'top': 10}
                    cols: 1
                    spacing: 7
            MDFloatLayout:

                size_hint_y: .11
                pos_hint: {'center_y':.95}
                MDFloatLayout:

                    size_hint: .9, .7531
                    padding: 15


                    FieldText:
                        id: user
                        text_color: 'black'
                        hinter: 'Задайте вопрос' #подумать еще как реализовать, чтоб текст пропадал, когда наводишься
                        #не через hint текст надо делать
                        max_height: "200dp"
                        mode: "filled"
                        on_text_validate: root.send()
                        padding: 15


                    MDIconButton:
                        icon: 'send'
                        pos_hint: {'center_x':.91, 'center_y':.5}
                        user_font_size: '18sp'
                        on_release: root.send()


