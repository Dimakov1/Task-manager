#: import NoTransition kivy.uix.screenmanager.NoTransition
Screens:
    transition: NoTransition()
    Login:
    Register:
    RailScreen:
    AddTask:


<Login>:
    name: 'login'
    input_login: login
    input_password: password
    MDScreen:
        md_bg_color: app.theme_cls.backgroundColor
        MDFloatLayout:
            MDIconButton: #кнопка для показа пароля (нужно доделать)
                style: "standard"
                icon: 'eye'
                theme_icon_color: "Custom"
                icon_color: "white"
                on_press: app.show_password()
                pos_hint: {'center_x': .7, "center_y": .428}

        BoxLayout:
            size_hint: (.5, .5)
            pos_hint: {'center_x': .5, 'center_y': .5}
            padding: '10dp'
            orientation: 'vertical'
            md_bg_color: app.theme_cls.primaryColor
            spacing: "40"
            MDLabel:
                font_style: "Headline"
                text: 'Вход'
                text_color: 'white'
                halign: 'center'

            FieldText:
                text_color: 'white'
                id: login
                icon: 'account'
                hint_text: 'Логин'

            FieldText:
                text_color: 'white'
                id: password
                hint_text: 'Пароль'
                password: True
                icon: 'key'



            BoxLayout:
                pos_hint: {'center_x': .5, 'center_y': .5}
                orientation : 'horizontal'
                spacing: "180"
                MDButton:
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: "green"
                    on_press: root.login_user()
                    MDButtonText:
                        text: '[b]ВОЙТИ[/b]'
                MDButton:
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: "red"
                    on_press:
                        root.input_login.text = ""
                        root.input_password.text = ""
                        root.manager.current = 'register'
                    MDButtonText:
                        text: '[b]РЕГИСТРАЦИЯ[/b]'



<FieldText>:
    theme_text_color: "Custom"
    text_color_normal: root.text_color
    text_color_focus: root.text_color
    radius: [dp(19)]

    MDTextFieldTrailingIcon:
        more_icon : root.more_icon

    MDTextFieldLeadingIcon:
        icon: root.icon
        theme_icon_color: "Custom"
        icon_color_normal: root.text_color
        icon_color_focus: root.text_color

    MDTextFieldHintText:
        text: root.hint_text
        text_color_normal: root.text_color
        text_color_focus: root.text_color




<Register>:
    name: 'register'
    login_t: login
    password_t: password
    password_t2: password2
    MDScreen:
        md_bg_color: app.theme_cls.backgroundColor
        BoxLayout:
            size_hint: (.5, .5)
            pos_hint: {'center_x': .5, 'center_y': .3}
            padding: '10dp'
            orientation: 'vertical'
            md_bg_color: app.theme_cls.primaryColor
            spacing: "40"
            MDLabel:
                text: "Регистрация"
                font_style: "Headline"
                text_color: 'white'
                halign: 'center'

            FieldText:
                id: login
                text_color: 'white'
                icon: 'account'
                hint_text: 'Логин'
            FieldText:
                id: password
                text_color: 'white'
                icon: 'key'
                hint_text: 'Пароль'
            FieldText:
                id: password2
                text_color: 'white'
                icon: 'key'
                hint_text: 'Пароль'
            MDButton:
                on_press: root.register()
                MDButtonText:
                    text: 'Зарегистрироваться'
            MDButton:
                on_press:
                    root.login_t.text = ""
                    root.password_t.text = ""
                    root.password_t2.text = ""
                    root.manager.current = 'login'
                MDButtonText:
                    text: 'назад'



<RailScreen>:
    name: 'rail_screen'
    BoxLayout:
        orientation: 'horizontal'

        MDNavigationRail:
            md_bg_color: app.theme_cls.backgroundColor
            elevation: 1
            anchor: 'bottom'
            type: "unselected"


            MDNavigationRailMenuButton:
                id: menu_
                icon: "menu"
                on_release: root.open_drop_item_menu(self)

            MDNavigationRailFabButton:
                icon: "home"


            CommonNavigationRailItem:
                icon: "alert-circle"
                text: "Важные"

            CommonNavigationRailItem:
                icon: "bookmark"
                text: "Активные"

            CommonNavigationRailItem:
                icon: "archive"
                text: "Все задачи"

            CommonNavigationRailItem:
                icon: "account"
                text: "Аккаунт"
            
            CommonNavigationRailItem:
                icon: "plus-box"
                text: "Добавить задачу"
                theme_text_color: "Custom"
                text_color: 'green'
                on_press: root.manager.current = 'add_task'

        Screens:
            transition: NoTransition()
            MenuScreen:
            ProfileScreen:


<CommonNavigationRailItem>

    MDNavigationRailItemIcon:
        icon: root.icon

    MDNavigationRailItemLabel:
        text: root.text


<MenuScreen>:
    name: 'menu_screen'
    MDScreen:
        md_bg_color: app.theme_cls.backgroundColor
        MDButton:
            pos_hint: {"center_x": .5, "center_y": .5}
            style: "filled"
            theme_bg_color: "Custom"
            md_bg_color: "green"
            on_press: root.manager.current = 'profile'

            MDButtonIcon:
                icon: "alarm"

            MDButtonText:
                text: "123"
                theme_text_color: "Custom"
                text_color: "red"


<ProfileScreen>:
    name: 'profile'
    MDScreen:
        md_bg_color: app.theme_cls.backgroundColor
        MDButton:
            pos_hint: {"center_x": .5, "center_y": .5}
            style: "filled"
            theme_bg_color: "Custom"
            md_bg_color: "green"
            on_press: root.manager.current = 'menu_screen'

            MDButtonIcon:
                icon: "account"

            MDButtonText:
                text: "Account"
                theme_text_color: "Custom"
                text_color: "white"

<AddTask>:
    name: 'add_task'
    MDScreen:
        md_bg_color: app.theme_cls.backgroundColor
        BoxLayout:
            orientation: 'vertical'
            padding: '10dp'
            spacing: '40'
            size_hint: (.7, .6)
            pos_hint: {'center_x': .5, 'center_y': .6}

            MDLabel:
                text: "Новая задача"
                font_style: "Headline"
                text_color: 'white'
                halign: 'center'

            FieldText:
                id: new_task_name
                text_color: 'white'
                icon: 'pin'
                hint_text: 'Название задачи'

            FieldText:
                id: new_task_description
                text_color: 'white'
                icon: 'pen'
                hint_text: 'Описание задачи'
                MDTextFieldMaxLengthText:
                    max_text_length: 60
                    text_color_normal: 'white'
                    text_color_focus: 'white'
            
            BoxLayout:
                orientation : 'horizontal'

                MDButton:
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: "green"
                    size_hint_x: None
                    on_press: root.login_user()
                    MDButtonText:
                        text: '[b]ДОБАВИТЬ ЗАДАЧУ[/b]'
                    MDButtonIcon:
                        icon: 'plus'

                Widget:
                    size_hint_x: 1

                MDButton:
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: "red"
                    size_hint_x: None
                    on_press: root.manager.current = 'rail_screen'
                    MDButtonText:
                        text: '[b]НАЗАД[/b]'
